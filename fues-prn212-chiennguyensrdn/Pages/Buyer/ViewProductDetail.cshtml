@page
@model fues_prn221_chiennguyensrdn.Pages.Buyer.ViewProductDetailModel
@{
    ViewData["Title"] = "View Product Detail";
}

<h2>@ViewData["Title"]</h2>

<div>
    <p>Title: @Model.Product.Title</p>
    <p>Description: @Model.Product.Description</p>
    <p>Price: @Model.Product.Price</p>
    <p>Category: @Model.Product.Category?.Name</p>
    <p>Seller: @Model.Product.Seller?.Name</p>
    <p>Created At: @Model.Product.CreatedAt.ToString("yyyy-MM-dd HH:mm")</p>
</div>

<hr />

<h4>Comments</h4>
<form method="post" asp-page-handler="Comment">
    <input type="hidden" asp-for="Id" />
    <div class="form-group">
        <textarea id="newComment" class="form-control" asp-for="NewComment" rows="3"></textarea>
        <span asp-validation-for="NewComment" class="text-danger"></span>
    </div>
    <button type="submit" class="btn btn-primary">Send</button>
</form>
<ul>
    @foreach (var comment in Model.Comments)
    {
        <li>@comment.User.Name: @comment.Comment1</li>
    }
</ul>
<hr />

<h4>Rating</h4>
<form method="post" asp-page-handler="Rating">
    <input type="hidden" asp-for="Id" />
    <div class="form-group">
        <label for="newRating">Rating:</label>
        <select id="newRating" class="form-control" asp-for="NewRating">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>
    </div>
    <button type="submit" class="btn btn-primary">Submit Rating</button>
</form>

@if (Model.UserRating != null)
{
    <div>
        <h5>Your Rating:</h5>
        <p>@Model.UserRating.Rating1</p>
    </div>
}
else
{
    <p>You have not rated this product yet.</p>
}
<div>
    <form asp-page="/Buyer/ViewProduct" method="get">
        <button type="submit" class="btn btn-primary">Back to List</button>
    </form>
</div>
